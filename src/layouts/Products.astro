---
const PRODUCTS = [
  {
    image: "p1.webp",
    title: "Postre de chocolate con chispas",
    description:
      "In today's fast-paced digital landscape, fostering seamless collaboration among Developers and IT Operations.",
  },
  {
    image: "p2.webp",
    title: "Postre de chocolate con chispas",
    description:
      "In today's fast-paced digital landscape, fostering seamless collaboration among Developers and IT Operations.",
  },
  {
    image: "p3.webp",
    title: "Postre de chocolate con chispas",
    description:
      "In today's fast-paced digital landscape, fostering seamless collaboration among Developers and IT Operations.",
  },
  {
    image: "p4.webp",
    title: "Postre de chocolate con chispas",
    description:
      "In today's fast-paced digital landscape, fostering seamless collaboration among Developers and IT Operations.",
  },
  {
    image: "p5.webp",
    title: "Postre de chocolate con chispas",
    description:
      "In today's fast-paced digital landscape, fostering seamless collaboration among Developers and IT Operations.",
  },
]
---

<section class="relative w-full" id="products">
  <div
    id="product-slider"
    class="
      flex gap-4 overflow-x-scroll scroll-smooth py-6 
      cursor-grab active:cursor-grabbing select-none
      no-scrollbar
      mask-[linear-gradient(to_right,transparent,black_0%,black_94%,transparent)]
      [-webkit-mask-image:linear-gradient(to_right,transparent,black_0%,black_94%,transparent)]
    "
  >
    {PRODUCTS.map(({ title, description, image }) => (
      <article class="bg-white/70 block max-w-sm min-w-[20rem] shrink-0 p-6 rounded-2xl shadow-lg">
        <img
          src={image}
          alt={title}
          class="rounded-xl w-full h-64 object-cover"
          draggable="false"
        />

        <h5 class="mt-6 mb-2 text-2xl font-semibold tracking-tight text-primary leading-7">
          {title}
        </h5>

        <p class="mb-6 text-main/70">
          {description}
        </p>

        <button
          class="inline-flex items-center text-main bg-icon hover:bg-main hover:text-icon
                 focus:ring-4 focus:ring-neutral-tertiary shadow-sm font-medium
                 tracking-tight leading-5 rounded-lg text-sm px-4 py-2.5"
        >
          Reserva
          <svg
            class="w-4 h-4 ms-1.5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
          >
            <path
              stroke-linecap="round"
              stroke-linejoin="round"
              stroke-width="2"
              d="M19 12H5m14 0-4 4m4-4-4-4"
            />
          </svg>
        </button>
      </article>
    ))}
  </div>
</section>

<script>
  const slider = document.getElementById("product-slider")

  let isDown = false
  let startX = 0
  let scrollLeft = 0

  slider.addEventListener("mousedown", (e) => {
    isDown = true
    startX = e.pageX - slider.offsetLeft
    scrollLeft = slider.scrollLeft
  })

  slider.addEventListener("mouseleave", () => {
    isDown = false
  })

  slider.addEventListener("mouseup", () => {
    isDown = false
  })

  slider.addEventListener("mousemove", (e) => {
    if (!isDown) return
    e.preventDefault()
    const x = e.pageX - slider.offsetLeft
    const walk = (x - startX) * 1.5
    slider.scrollLeft = scrollLeft - walk
  })
</script>
